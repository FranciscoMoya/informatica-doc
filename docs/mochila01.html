<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>24. El problema de la mochila 0-1</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="_static/clickable.css" type="text/css" />
    <link rel="stylesheet" href="_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/datafile.css" type="text/css" />
    <link rel="stylesheet" href="_static/dragndrop.css" type="text/css" />
    <link rel="stylesheet" href="_static/fitb.css" type="text/css" />
    <link rel="stylesheet" href="_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="_static/livecode.css" type="text/css" />
    <link rel="stylesheet" href="_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="_static/video.css" type="text/css" />
    <link rel="stylesheet" href="_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/runestonebase.js"></script>
    <script type="text/javascript" src="_static/codemirror.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="_static/bookfuncs.js"></script>
    <script type="text/javascript" src="_static/codemirror.js"></script>
    <script type="text/javascript" src="_static/xml.js"></script>
    <script type="text/javascript" src="_static/css.js"></script>
    <script type="text/javascript" src="_static/htmlmixed.js"></script>
    <script type="text/javascript" src="_static/python.js"></script>
    <script type="text/javascript" src="_static/javascript.js"></script>
    <script type="text/javascript" src="_static/activecode.js"></script>
    <script type="text/javascript" src="_static/skulpt.min.js"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="_static/clike.js"></script>
    <script type="text/javascript" src="_static/timed_activecode.js"></script>
    <script type="text/javascript" src="_static/animationbase.js"></script>
    <script type="text/javascript" src="_static/mchoice.js"></script>
    <script type="text/javascript" src="_static/timedmc.js"></script>
    <script type="text/javascript" src="_static/timed.js"></script>
    <script type="text/javascript" src="_static/clickable.js"></script>
    <script type="text/javascript" src="_static/timedclickable.js"></script>
    <script type="text/javascript" src="_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="_static/pytutor.js"></script>
    <script type="text/javascript" src="_static/codelens.js"></script>
    <script type="text/javascript" src="_static/skulpt.min.js"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="_static/datafile.js"></script>
    <script type="text/javascript" src="_static/dragndrop.js"></script>
    <script type="text/javascript" src="_static/timeddnd.js"></script>
    <script type="text/javascript" src="_static/fitb.js"></script>
    <script type="text/javascript" src="_static/timedfitb.js"></script>
    <script type="text/javascript" src="_static/livecode.js"></script>
    <script type="text/javascript" src="_static/clike.js"></script>
    <script type="text/javascript" src="_static/lib/prettify.js"></script>
    <script type="text/javascript" src="_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="_static/parsons.js"></script>
    <script type="text/javascript" src="_static/timedparsons.js"></script>
    <script type="text/javascript" src="_static/poll.js"></script>
    <script type="text/javascript" src="_static/reveal.js"></script>
    <script type="text/javascript" src="_static/shortanswer.js"></script>
    <script type="text/javascript" src="_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="_static/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/waypoints.min.js"></script>
    <script type="text/javascript" src="_static/rangy-core.js"></script>
    <script type="text/javascript" src="_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="_static/user-highlights.js"></script>
    <script type="text/javascript" src="_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="author" title="Sobre este documento" href="about.html" />
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="25. Navegación web con Python" href="Navegación web.html" />
    <link rel="prev" title="23. Lab 3: Archivos y manipulación de cadenas" href="lab-03.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'CS101';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'informatica';
  eBookConfig.runestone_version = '2.7.11';
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head>
  <body role="document">


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <div style='float:left;display:block;background-size:90px 40px !important;height:40px;width:90px;background:transparent url("_static/eii_small.png") no-repeat 0px 0px;'>&nbsp; </div>
        <a class="navbar-brand" href="index.html">Informática</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <!--<li class="divider-vertical"></li>-->
        
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ir a <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">24. El problema de la mochila 0-1</a><ul>
<li><a class="reference internal" href="#enumeracion-exhaustiva">24.1. Enumeración exhaustiva</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <!--<li class="divider-vertical"></li>-->
        
        <!--
          
  <li id="relations-prev" title="Previous Chapter - 23. Lab 3: Archivos y manipulación de cadenas" data-toggle="tooltip">
    <a href="lab-03.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - 25. Navegación web con Python' data-toggle="tooltip" >
    <a href="Navegación web.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='index.html'>Índice del libro</a></li>
            
            <li><a href="genindex.html">Índice alfabético</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Código activo de prueba</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Buscar en el libro" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        
        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href="_static/navhelp.html">Ayuda a la navegación</a></li>
            
            <li>
  <a href="_sources/mochila01.rst.txt"
     rel="nofollow">Ver fuente</a></li>
            
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>Acerca de Runestone</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="el-problema-de-la-mochila-0-1">
<h1>24. El problema de la mochila 0-1<a class="headerlink" href="#el-problema-de-la-mochila-0-1" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Dado un conjunto de elementos con <em>valor</em> y <em>peso</em> se trata de
determinar el subconjunto de elementos que maximiza el valor y cumple
una determinada restricción de peso. Matemáticamente implica determinar
para un conjunto de elementos <span class="math">\(I = \{I_i\}\)</span> el vector booleano
<span class="math">\(V\)</span> que maximiza:</p>
<div class="math">
\[\sum_iV_i\cdot I_i^{valor}\]</div>
<p>Sujeto a la restricción:</p>
<div class="math">
\[\sum_iV_i\cdot I_i^{peso} \leq w\]</div>
<p>Donde <span class="math">\(I_i^{valor}\)</span> es el valor del elemento <span class="math">\(I_i\)</span>,
<span class="math">\(I_i^{peso}\)</span> es el peso del elemento <span class="math">\(I_i\)</span> y <span class="math">\(V_i\)</span>
vale <em>1</em> si se coge el elemento <span class="math">\(I_i\)</span> y <em>0</em> en caso contrario.</p>
<p>Empecemos por las pruebas. Un caso simple podría ser el siguiente:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">prueba0</span><span class="p">():</span>
    <span class="n">nombres</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]</span>
    <span class="n">valores</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">6</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>   <span class="mi">8</span><span class="p">,</span>   <span class="mi">9</span><span class="p">]</span>
    <span class="n">pesos</span>   <span class="o">=</span> <span class="p">[</span> <span class="mi">3</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span>   <span class="mi">5</span><span class="p">]</span>
    <span class="n">elems</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">nombres</span><span class="p">,</span> <span class="n">valores</span><span class="p">,</span> <span class="n">pesos</span><span class="p">))</span>
    <span class="n">val</span><span class="p">,</span> <span class="n">saco</span> <span class="o">=</span> <span class="n">mochila01</span><span class="p">(</span><span class="n">elems</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">saco</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Valor total =&#39;</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">valor</span><span class="p">(</span><span class="n">e</span><span class="p">):</span> <span class="k">return</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">def</span> <span class="nf">peso</span><span class="p">(</span><span class="n">e</span><span class="p">):</span> <span class="k">return</span> <span class="n">e</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>De esta forma modelamos los elementos como tuplas de tres elementos
<em>(nombre, valor, peso)</em> y utilizamos funciones auxiliares <code class="docutils literal"><span class="pre">valor</span></code> y
<code class="docutils literal"><span class="pre">peso</span></code> para abstraer la representación y no cometer errores.</p>
<p>Esta prueba nos puede valer para desarrollar el algoritmo, pero
añadiremos una prueba más de tamaño variable para probar los límites del
algoritmo y caracterizar su rendimiento.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="k">def</span> <span class="nf">constr_elems</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">valMax</span><span class="p">,</span> <span class="n">pesoMax</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span>
              <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">valMax</span><span class="p">),</span>
              <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">pesoMax</span><span class="p">))</span> \
             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">]</span>


<span class="k">def</span> <span class="nf">prueba1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">elems</span> <span class="o">=</span> <span class="n">constr_elems</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">val</span><span class="p">,</span> <span class="n">saco</span> <span class="o">=</span> <span class="n">mochila01</span><span class="p">(</span><span class="n">elems</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Contenido:&#39;</span><span class="p">,</span> <span class="n">saco</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Valor total:&#39;</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="enumeracion-exhaustiva">
<h2>24.1. Enumeración exhaustiva<a class="headerlink" href="#enumeracion-exhaustiva" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La solución trivial es la evaluación de todas las posibles
combinaciones. La dificultad estriba precisamente en eso, en generar
todos los posibles subconjuntos del conjunto de elementos. Es lo que se
conoce como el <em>powerset</em> de un conjunto.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mochila01</span><span class="p">(</span><span class="n">disponibles</span><span class="p">,</span> <span class="n">pesoMax</span> <span class="o">=</span> <span class="mi">20</span><span class="p">):</span>
    <span class="n">mejorVal</span><span class="p">,</span> <span class="n">mejorSaco</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">saco</span> <span class="ow">in</span> <span class="n">genPowerset</span><span class="p">(</span><span class="n">disponibles</span><span class="p">):</span>
        <span class="n">valor</span><span class="p">,</span><span class="n">peso</span> <span class="o">=</span> <span class="n">valorSaco</span><span class="p">(</span><span class="n">saco</span><span class="p">),</span><span class="n">pesoSaco</span><span class="p">(</span><span class="n">saco</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">peso</span> <span class="o">&lt;=</span> <span class="n">pesoMax</span> <span class="ow">and</span> <span class="n">valor</span> <span class="o">&gt;</span> <span class="n">mejorVal</span><span class="p">:</span>
            <span class="n">mejorVal</span><span class="p">,</span> <span class="n">mejorSaco</span> <span class="o">=</span> <span class="n">valor</span><span class="p">,</span> <span class="n">saco</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">mejorVal</span><span class="p">,</span> <span class="n">mejorSaco</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">valorSaco</span><span class="p">(</span><span class="n">saco</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">valor</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">saco</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pesoSaco</span><span class="p">(</span><span class="n">saco</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">peso</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">saco</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">genPowerset</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">genSubset</span><span class="p">(</span><span class="n">L</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> \
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)))</span>
<span class="k">def</span> <span class="nf">genSubset</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">L</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> \
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">))</span> \
            <span class="k">if</span> <span class="n">isBitSet</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)]</span>
<span class="k">def</span> <span class="nf">isBitSet</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">bit</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">bit</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mochila01</span><span class="p">(</span><span class="n">disponibles</span><span class="p">,</span> <span class="n">pesoMax</span> <span class="o">=</span> <span class="mi">20</span><span class="p">):</span>
    <span class="n">saco</span><span class="p">,</span> <span class="n">valorSaco</span> <span class="o">=</span> <span class="p">[],</span> <span class="mi">0</span>
    <span class="n">quedan</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">disponibles</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">mejorElemento</span><span class="p">(</span><span class="n">quedan</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">peso</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">pesoMax</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">pesoMax</span> <span class="o">-=</span> <span class="n">peso</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">valorSaco</span> <span class="o">+=</span> <span class="n">valor</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">quedan</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">saco</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">valorSaco</span><span class="p">,</span> <span class="n">saco</span>

<span class="k">def</span> <span class="nf">mejorElemento</span><span class="p">(</span><span class="n">disponibles</span><span class="p">):</span>
    <span class="n">mejorElem</span><span class="p">,</span> <span class="n">mejorCoste</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">disponibles</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">cost</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="n">mejorCoste</span><span class="p">:</span>
            <span class="n">mejorElem</span><span class="p">,</span> <span class="n">mejorCoste</span> <span class="o">=</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span>
    <span class="k">return</span> <span class="n">mejorElem</span>

<span class="k">def</span> <span class="nf">mejorElemento</span><span class="p">(</span><span class="n">disponibles</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">disponibles</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">cost</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">valor</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">valor</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">/</span><span class="n">peso</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mochila01</span><span class="p">(</span><span class="n">pend</span><span class="p">,</span> <span class="n">libre</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">pend</span> <span class="ow">or</span> <span class="n">libre</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="p">()</span>
    <span class="k">if</span> <span class="n">peso</span><span class="p">(</span><span class="n">pend</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">libre</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">mochila01</span><span class="p">(</span><span class="n">pend</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">libre</span><span class="p">)</span>
    <span class="n">elem</span> <span class="o">=</span> <span class="n">pend</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">val1</span><span class="p">,</span> <span class="n">saco1</span> <span class="o">=</span> <span class="n">mochila01</span><span class="p">(</span><span class="n">pend</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                            <span class="n">libre</span> <span class="o">-</span> <span class="n">peso</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span>
    <span class="n">val1</span> <span class="o">+=</span> <span class="n">valor</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="n">saco1</span> <span class="o">+=</span> <span class="p">(</span><span class="n">elem</span><span class="p">,)</span>
    <span class="n">val0</span><span class="p">,</span> <span class="n">saco0</span> <span class="o">=</span> <span class="n">mochila01</span><span class="p">(</span><span class="n">pend</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">libre</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">val1</span> <span class="o">&gt;</span> <span class="n">val0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">val1</span><span class="p">,</span> <span class="n">saco1</span>
    <span class="k">return</span> <span class="n">val0</span><span class="p">,</span> <span class="n">saco0</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">prueba0</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">((</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">Valor</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">15</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mochila01</span><span class="p">(</span><span class="n">pend</span><span class="p">,</span> <span class="n">libre</span><span class="p">,</span> <span class="n">memo</span><span class="o">=</span> <span class="p">{}):</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pend</span><span class="p">),</span> <span class="n">libre</span><span class="p">)</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">memo</span><span class="p">[(</span><span class="nb">len</span><span class="p">(</span><span class="n">pend</span><span class="p">),</span> <span class="n">libre</span><span class="p">)]</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">elegir</span><span class="p">(</span><span class="n">pend</span><span class="p">,</span> <span class="n">libre</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
    <span class="n">memo</span><span class="p">[(</span><span class="nb">len</span><span class="p">(</span><span class="n">pend</span><span class="p">),</span> <span class="n">libre</span><span class="p">)]</span> <span class="o">=</span> <span class="n">ret</span>
    <span class="k">return</span> <span class="n">ret</span>

<span class="k">def</span> <span class="nf">elegir</span><span class="p">(</span><span class="n">pend</span><span class="p">,</span> <span class="n">libre</span><span class="p">,</span> <span class="n">memo</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">pend</span> <span class="ow">or</span> <span class="n">libre</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="p">()</span>
    <span class="k">if</span> <span class="n">peso</span><span class="p">(</span><span class="n">pend</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">libre</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">mochila01</span><span class="p">(</span><span class="n">pend</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">libre</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
    <span class="n">elem</span> <span class="o">=</span> <span class="n">pend</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">val1</span><span class="p">,</span> <span class="n">saco1</span> <span class="o">=</span> <span class="n">mochila01</span><span class="p">(</span><span class="n">pend</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                            <span class="n">libre</span> <span class="o">-</span> <span class="n">peso</span><span class="p">(</span><span class="n">elem</span><span class="p">),</span>
                            <span class="n">memo</span><span class="p">)</span>
    <span class="n">val1</span> <span class="o">+=</span> <span class="n">valor</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="n">saco1</span> <span class="o">+=</span> <span class="p">(</span><span class="n">elem</span><span class="p">,)</span>
    <span class="n">val0</span><span class="p">,</span> <span class="n">saco0</span> <span class="o">=</span> <span class="n">mochila01</span><span class="p">(</span><span class="n">pend</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">libre</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">val1</span> <span class="o">&gt;</span> <span class="n">val0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">val1</span><span class="p">,</span> <span class="n">saco1</span>
    <span class="k">return</span> <span class="n">val0</span><span class="p">,</span> <span class="n">saco0</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">prueba0</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">((</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">Valor</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">15</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">prueba1</span><span class="p">(</span><span class="mi">180</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Contenido</span><span class="p">:</span> <span class="p">((</span><span class="s1">&#39;99&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;91&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;76&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;73&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;67&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;65&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;61&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;34&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;28&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;19&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;96&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;87&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;77&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;66&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;53&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;52&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;43&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;40&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;35&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;32&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;21&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">Valor</span> <span class="n">total</span><span class="p">:</span> <span class="mi">174</span>
</pre></div>
</div>
</div>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Capítulo anterior - 23. Lab 3: Archivos y manipulación de cadenas' data-toggle="tooltip">
    <a href="lab-03.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="lab-03.html" ></a>
  
  <li id="relations-next" class="navLink" title='Capítulo siguiente - 25. Navegación web con Python' data-toggle="tooltip" >
    <a href="Navegación web.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="Navegación web.html" >Next Section - 25. Navegación web con Python</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017 Francisco Moya.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>