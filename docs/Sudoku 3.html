<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>50. Sudoku al estilo de P. Norvig</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="_static/clickable.css" type="text/css" />
    <link rel="stylesheet" href="_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/datafile.css" type="text/css" />
    <link rel="stylesheet" href="_static/dragndrop.css" type="text/css" />
    <link rel="stylesheet" href="_static/fitb.css" type="text/css" />
    <link rel="stylesheet" href="_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="_static/livecode.css" type="text/css" />
    <link rel="stylesheet" href="_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="_static/video.css" type="text/css" />
    <link rel="stylesheet" href="_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/runestonebase.js"></script>
    <script type="text/javascript" src="_static/codemirror.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="_static/bookfuncs.js"></script>
    <script type="text/javascript" src="_static/codemirror.js"></script>
    <script type="text/javascript" src="_static/xml.js"></script>
    <script type="text/javascript" src="_static/css.js"></script>
    <script type="text/javascript" src="_static/htmlmixed.js"></script>
    <script type="text/javascript" src="_static/python.js"></script>
    <script type="text/javascript" src="_static/javascript.js"></script>
    <script type="text/javascript" src="_static/activecode.js"></script>
    <script type="text/javascript" src="_static/skulpt.min.js"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="_static/clike.js"></script>
    <script type="text/javascript" src="_static/timed_activecode.js"></script>
    <script type="text/javascript" src="_static/animationbase.js"></script>
    <script type="text/javascript" src="_static/mchoice.js"></script>
    <script type="text/javascript" src="_static/timedmc.js"></script>
    <script type="text/javascript" src="_static/timed.js"></script>
    <script type="text/javascript" src="_static/clickable.js"></script>
    <script type="text/javascript" src="_static/timedclickable.js"></script>
    <script type="text/javascript" src="_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="_static/pytutor.js"></script>
    <script type="text/javascript" src="_static/codelens.js"></script>
    <script type="text/javascript" src="_static/skulpt.min.js"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="_static/datafile.js"></script>
    <script type="text/javascript" src="_static/dragndrop.js"></script>
    <script type="text/javascript" src="_static/timeddnd.js"></script>
    <script type="text/javascript" src="_static/fitb.js"></script>
    <script type="text/javascript" src="_static/timedfitb.js"></script>
    <script type="text/javascript" src="_static/livecode.js"></script>
    <script type="text/javascript" src="_static/clike.js"></script>
    <script type="text/javascript" src="_static/lib/prettify.js"></script>
    <script type="text/javascript" src="_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="_static/parsons.js"></script>
    <script type="text/javascript" src="_static/timedparsons.js"></script>
    <script type="text/javascript" src="_static/poll.js"></script>
    <script type="text/javascript" src="_static/reveal.js"></script>
    <script type="text/javascript" src="_static/shortanswer.js"></script>
    <script type="text/javascript" src="_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="_static/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/waypoints.min.js"></script>
    <script type="text/javascript" src="_static/rangy-core.js"></script>
    <script type="text/javascript" src="_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="_static/user-highlights.js"></script>
    <script type="text/javascript" src="_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="author" title="Sobre este documento" href="about.html" />
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="51. Sudoku" href="Sudoku.html" />
    <link rel="prev" title="49. Resolución de Sudokus" href="Sudoku 2.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'CS101';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "py";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'informatica';
  eBookConfig.runestone_version = '2.7.15';
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head>
  <body role="document">


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <div style='float:left;display:block;background-size:90px 40px !important;height:40px;width:90px;background:transparent url("_static/eii_small.png") no-repeat 0px 0px;'>&nbsp; </div>
        <a class="navbar-brand" href="index.html">Informática</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <!--<li class="divider-vertical"></li>-->
        
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ir a <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">50. Sudoku al estilo de P. Norvig</a></li>
</ul>
</ul>
</li>
          <!--<li class="divider-vertical"></li>-->
        
        <!--
          
  <li id="relations-prev" title="Previous Chapter - 49. Resolución de Sudokus" data-toggle="tooltip">
    <a href="Sudoku 2.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - 51. Sudoku' data-toggle="tooltip" >
    <a href="Sudoku.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='index.html'>Índice del libro</a></li>
            
            <li><a href="genindex.html">Índice alfabético</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Código activo de prueba</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Buscar en el libro" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        
        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href="_static/navhelp.html">Ayuda a la navegación</a></li>
            
            <li>
  <a href="_sources/Sudoku 3.rst.txt"
     rel="nofollow">Ver fuente</a></li>
            
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>Acerca de Runestone</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="sudoku-al-estilo-de-p-norvig">
<h1>50. Sudoku al estilo de P. Norvig<a class="headerlink" href="#sudoku-al-estilo-de-p-norvig" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Esta solución al Sudoku es una mínima re-escritura de la <a class="reference external" href="http://norvig.com/sudoku.html">solución dada
por Peter Norvig en su página</a>.</p>
<p>Los cambios tan solo pretenden eliminar las decisiones sutiles, que no
son propias de un aprendiz. Tal es el caso de la codificación de filas,
columnas y valores como cadenas para evitar el uso de <code class="docutils literal"><span class="pre">deepcopy</span></code>.</p>
<p>Nosotros codificaremos las casillas con sus coordenadas cartesianas,
como una simple tupla y los valores como conjuntos de números.</p>
<p>En primer lugar vamos a definir las estructuras que emplea Peter Norvig.
Piénsalas tú mismo en casa, no las leas sin más. Escribe tú mismo una
función que las calcule y emplea tantas funciones como necesites.</p>
<ul class="simple">
<li>Cada casilla es una tupla <code class="docutils literal"><span class="pre">(x,y)</span></code> con las coordenadas cartesianas.</li>
<li><code class="docutils literal"><span class="pre">squares</span></code> es una lista de todas las casillas del Sudoku.</li>
<li><code class="docutils literal"><span class="pre">unitlist</span></code> es una lista de todas las unidades. Una unidad es a su
vez una lista de 9 casillas que no pueden contener nada más que una
cifra de cada. Es decir, <code class="docutils literal"><span class="pre">unitlist</span></code> contiene listas de 9 casillas
que corresponden a las filas, columnas y bloques.</li>
<li><code class="docutils literal"><span class="pre">units</span></code> es un diccionario que asocia con cada casilla del Sudoku
todas las unidades a las que pertenece dicha casilla.</li>
<li><code class="docutils literal"><span class="pre">peers</span></code> (colegas) es un diccionario que asocia a cada casilla del
Sudoku la lista de casillas que están en su misma fila, columna o
bloque, sin incluirla.</li>
</ul>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">squares</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="p">]</span>
<span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="p">]</span>
<span class="n">unitlist</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="p">]</span> <span class="o">+</span> \
            <span class="p">[</span> <span class="p">[</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="p">]</span> <span class="o">+</span> \
            <span class="p">[</span> <span class="p">[</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bx</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">by</span> <span class="p">]</span> <span class="k">for</span> <span class="n">bx</span> <span class="ow">in</span> <span class="n">blocks</span> <span class="k">for</span> <span class="n">by</span> <span class="ow">in</span> <span class="n">blocks</span> <span class="p">]</span>
<span class="n">units</span> <span class="o">=</span> <span class="p">{</span> <span class="n">s</span><span class="p">:</span> <span class="p">[</span><span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">unitlist</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">u</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">squares</span> <span class="p">}</span>
<span class="n">peers</span> <span class="o">=</span> <span class="p">{</span> <span class="n">s</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">units</span><span class="p">[</span><span class="n">s</span><span class="p">],[]))</span> <span class="o">-</span> <span class="p">{</span> <span class="n">s</span> <span class="p">}</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">squares</span> <span class="p">}</span>
</pre></div>
</div>
<p>Vamos ahora a definir funciones para convertir una cadena de texto a un
Sudoku. El Sudoku lo modelaremos como un diccionario que hace
corresponder a cada casilla con el conjunto de números que puede
contener dicha casilla. Es prácticamente una trasliteración del código
de Peter Norvig, por lo que no merece la pena comentarlo con mucho más
detalle.</p>
<p>La función ignora cualquier carácter que no sea una cifra o un punto. El
punto o el 0 representan casillas sin rellenar.</p>
<p>Inicialmente el Sudoku está vacío. Es decir, cada casilla puede contener
cualquier cifra. Lo modelamos con la variable <code class="docutils literal"><span class="pre">values</span></code> que no es más
que un diccionario que hace corresponder cada casilla al conjunto de
valores permitidos en esa casilla. Usamos conjuntos (<code class="docutils literal"><span class="pre">set</span></code>) porque se
esta forma garantizamos que no hay repetidos y además podemos eliminar
elementos empleando el operador de resta.</p>
<p>Cada vez que conocemos una casilla con un dígito fijo (de 1 a 9) podemos
asignar ese valor a la casilla eliminado el resto. Esta asignación hace
que podamos simplificar otras casillas (propagación de restricciones).</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">digits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">parse_grid</span><span class="p">(</span><span class="n">grid</span><span class="p">):</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">{</span> <span class="n">s</span><span class="p">:</span><span class="nb">set</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">squares</span> <span class="p">}</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span><span class="n">d</span> <span class="ow">in</span> <span class="n">grid_values</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">digits</span><span class="p">:</span>
            <span class="n">asignar</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="p">{</span> <span class="n">d</span> <span class="p">})</span>
    <span class="k">return</span> <span class="n">values</span>

<span class="k">def</span> <span class="nf">grid_values</span><span class="p">(</span><span class="n">grid</span><span class="p">):</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[</span> <span class="n">gvalue</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">grid</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;.1234567890&#39;</span> <span class="p">]</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">81</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">squares</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">gvalue</span><span class="p">(</span><span class="n">c</span><span class="p">):</span> <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;123456789&#39;</span> <span class="k">else</span> <span class="mi">0</span>
</pre></div>
</div>
<p>El punto clave de la solución del Sudoku es la propagación de
restricciones. Básicamente consiste en la combinación de dos funciones
que cooperan entre sí, una para asignar valores a una casilla y otra
para eliminar valores de una casilla. Cuando se asigna un valor en una
casilla, debe eliminarse de todos sus <code class="docutils literal"><span class="pre">peers</span></code>. Al eliminar valores de
una casilla puede que queden nuevas casillas con un único valor, que
daría lugar a nuevas eliminaciones. También puede que solo quede una
casilla posible donde poner alguna de las cifras, por lo que daría lugar
a la asignación de esta cifra.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">asignar</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="n">other_values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="n">d</span>
    <span class="n">eliminar</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">other_values</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">d</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">]):</span>
        <span class="k">return</span>

    <span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-=</span> <span class="n">d</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Casilla </span><span class="si">{0}</span><span class="s1"> sin valores posibles&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

    <span class="c1">## (1) Si una casilla se queda con un solo valor, eliminarlo de sus colegas.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">s2</span> <span class="ow">in</span> <span class="n">peers</span><span class="p">[</span><span class="n">s</span><span class="p">]:</span>
            <span class="n">eliminar</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">])</span>

    <span class="c1">## (2) Si solo hay una casilla de una unidad para el digito d asignarlo a esa casilla.</span>
    <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">units</span><span class="p">[</span><span class="n">s</span><span class="p">]:</span>
        <span class="n">dplaces</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">u</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">])]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dplaces</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No hay casilla para valor </span><span class="si">{0}</span><span class="s1"> en unidad </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">u</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">dplaces</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">asignar</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">dplaces</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p>Va siendo hora de escribir una función para mostrar el Sudoku.
Dibujaremos líneas para separar los bloques. Lo más destacable es el
cálculo del ancho de cada casilla, que depende de cuántas cifras
posibles tienen todas las casillas del Sudoku.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="n">width</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">])</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">squares</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;+&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="p">(</span><span class="n">width</span><span class="o">*</span><span class="mi">3</span><span class="p">)]</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[(</span><span class="n">c</span><span class="p">,</span><span class="n">r</span><span class="p">)]])</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="n">width</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="s1">&#39;|&#39;</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                      <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">r</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span> <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
<p>Solo con esto ya se resuelven prácticamente todos los Sudokus fáciles.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">grid1</span> <span class="o">=</span> <span class="s1">&#39;003020600900305001001806400008102900700000008006708200002609500800203009005010300&#39;</span>
<span class="n">display</span><span class="p">(</span><span class="n">parse_grid</span><span class="p">(</span><span class="n">grid1</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="mi">8</span> <span class="mi">3</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">|</span><span class="mi">6</span> <span class="mi">5</span> <span class="mi">7</span>
<span class="mi">9</span> <span class="mi">6</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">8</span> <span class="mi">2</span> <span class="mi">1</span>
<span class="mi">2</span> <span class="mi">5</span> <span class="mi">1</span> <span class="o">|</span><span class="mi">8</span> <span class="mi">7</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">4</span> <span class="mi">9</span> <span class="mi">3</span>
<span class="o">------+------+------</span>
<span class="mi">5</span> <span class="mi">4</span> <span class="mi">8</span> <span class="o">|</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">2</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">7</span> <span class="mi">6</span>
<span class="mi">7</span> <span class="mi">2</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">4</span> <span class="o">|</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">8</span>
<span class="mi">1</span> <span class="mi">3</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">7</span> <span class="mi">9</span> <span class="mi">8</span> <span class="o">|</span><span class="mi">2</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">------+------+------</span>
<span class="mi">3</span> <span class="mi">7</span> <span class="mi">2</span> <span class="o">|</span><span class="mi">6</span> <span class="mi">8</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">5</span> <span class="mi">1</span> <span class="mi">4</span>
<span class="mi">8</span> <span class="mi">1</span> <span class="mi">4</span> <span class="o">|</span><span class="mi">2</span> <span class="mi">5</span> <span class="mi">3</span> <span class="o">|</span><span class="mi">7</span> <span class="mi">6</span> <span class="mi">9</span>
<span class="mi">6</span> <span class="mi">9</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">4</span> <span class="mi">1</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">8</span> <span class="mi">2</span>
</pre></div>
</div>
<p>En algunos casos la propagación de restricciones sigue dejando un Sudoku
muy poco especificado.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">grid2</span> <span class="o">=</span> <span class="s1">&#39;4.....8.5.3..........7......2.....6.....8.4......1.......6.3.7.5..2.....1.4......&#39;</span>
<span class="n">display</span><span class="p">(</span><span class="n">parse_grid</span><span class="p">(</span><span class="n">grid2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="mi">4</span>      <span class="mi">1679</span>   <span class="mi">12679</span>  <span class="o">|</span>  <span class="mi">139</span>     <span class="mi">2369</span>    <span class="mi">1269</span>  <span class="o">|</span>   <span class="mi">8</span>      <span class="mi">1239</span>     <span class="mi">5</span>
 <span class="mi">26789</span>     <span class="mi">3</span>    <span class="mi">1256789</span> <span class="o">|</span> <span class="mi">14589</span>   <span class="mi">24569</span>  <span class="mi">1245689</span> <span class="o">|</span> <span class="mi">12679</span>    <span class="mi">1249</span>   <span class="mi">124679</span>
  <span class="mi">2689</span>   <span class="mi">15689</span>   <span class="mi">125689</span> <span class="o">|</span>   <span class="mi">7</span>     <span class="mi">234569</span> <span class="mi">1245689</span> <span class="o">|</span> <span class="mi">12369</span>   <span class="mi">12349</span>   <span class="mi">123469</span>
<span class="o">------------------------+------------------------+------------------------</span>
  <span class="mi">3789</span>     <span class="mi">2</span>     <span class="mi">135789</span> <span class="o">|</span>  <span class="mi">3459</span>   <span class="mi">34579</span>    <span class="mi">4579</span>  <span class="o">|</span> <span class="mi">13579</span>     <span class="mi">6</span>     <span class="mi">13789</span>
  <span class="mi">3679</span>   <span class="mi">15679</span>   <span class="mi">135679</span> <span class="o">|</span>  <span class="mi">359</span>      <span class="mi">8</span>     <span class="mi">25679</span>  <span class="o">|</span>   <span class="mi">4</span>     <span class="mi">12359</span>   <span class="mi">12379</span>
 <span class="mi">36789</span>     <span class="mi">4</span>     <span class="mi">356789</span> <span class="o">|</span>  <span class="mi">359</span>      <span class="mi">1</span>     <span class="mi">25679</span>  <span class="o">|</span> <span class="mi">23579</span>   <span class="mi">23589</span>   <span class="mi">23789</span>
<span class="o">------------------------+------------------------+------------------------</span>
  <span class="mi">289</span>      <span class="mi">89</span>     <span class="mi">289</span>   <span class="o">|</span>   <span class="mi">6</span>      <span class="mi">459</span>      <span class="mi">3</span>    <span class="o">|</span>  <span class="mi">1259</span>     <span class="mi">7</span>     <span class="mi">12489</span>
   <span class="mi">5</span>      <span class="mi">6789</span>   <span class="mi">36789</span>  <span class="o">|</span>   <span class="mi">2</span>      <span class="mi">479</span>    <span class="mi">14789</span>  <span class="o">|</span>  <span class="mi">1369</span>   <span class="mi">13489</span>   <span class="mi">134689</span>
   <span class="mi">1</span>      <span class="mi">6789</span>     <span class="mi">4</span>    <span class="o">|</span>  <span class="mi">589</span>     <span class="mi">579</span>     <span class="mi">5789</span>  <span class="o">|</span> <span class="mi">23569</span>   <span class="mi">23589</span>   <span class="mi">23689</span>
</pre></div>
</div>
<p>Aparentemente el número de posibilidades es aún muy elevado:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">nposibles</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">n</span> <span class="o">*=</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nposibles</span><span class="p">(</span><span class="n">parse_grid</span><span class="p">(</span><span class="n">grid2</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">181432630923264000000000000000000000000000</span>
</pre></div>
</div>
<p>Sin embargo si dirigimos adecuadamente la búsqueda el resultado puede
ser muy rápido. Tomar una decisión sobre el valor de una casilla que
tiene nueve posibilidades nos da un 11% de probabilidad de acierto. Sin
embargo elegir una de las opciones de una casilla que solo tenga dos
posibilidades nos da un 50% de probabilidad de acierto, y al propagar
las restricciones se reduce la cardinalidad de las demás casillas,
aumentando correspondientemente la probabilidad de acierto.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">grid</span><span class="p">):</span> <span class="k">return</span> <span class="n">search</span><span class="p">(</span><span class="n">parse_grid</span><span class="p">(</span><span class="n">grid</span><span class="p">))</span>

<span class="kn">from</span> <span class="nn">copy</span> <span class="k">import</span> <span class="n">deepcopy</span>

<span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">squares</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="c1">## Elige la casilla sin fijar con menos posibilidades</span>
    <span class="n">n</span><span class="p">,</span><span class="n">s</span> <span class="o">=</span> <span class="nb">min</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">]),</span> <span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">squares</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">intentar_todos</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">intentar_todos</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="n">s</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tentativa</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="n">asignar</span><span class="p">(</span><span class="n">tentativa</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="p">{</span> <span class="n">d</span> <span class="p">})</span>
            <span class="k">return</span> <span class="n">search</span><span class="p">(</span><span class="n">tentativa</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No hay solucion&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">solve</span><span class="p">(</span><span class="n">grid2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="mi">1</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">6</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">8</span> <span class="mi">2</span> <span class="mi">5</span>
<span class="mi">6</span> <span class="mi">3</span> <span class="mi">2</span> <span class="o">|</span><span class="mi">1</span> <span class="mi">5</span> <span class="mi">8</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">4</span> <span class="mi">7</span>
<span class="mi">9</span> <span class="mi">5</span> <span class="mi">8</span> <span class="o">|</span><span class="mi">7</span> <span class="mi">2</span> <span class="mi">4</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">1</span> <span class="mi">6</span>
<span class="o">------+------+------</span>
<span class="mi">8</span> <span class="mi">2</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">4</span> <span class="mi">3</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">1</span> <span class="mi">6</span> <span class="mi">9</span>
<span class="mi">7</span> <span class="mi">9</span> <span class="mi">1</span> <span class="o">|</span><span class="mi">5</span> <span class="mi">8</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span>
<span class="mi">3</span> <span class="mi">4</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">1</span> <span class="mi">2</span> <span class="o">|</span><span class="mi">7</span> <span class="mi">5</span> <span class="mi">8</span>
<span class="o">------+------+------</span>
<span class="mi">2</span> <span class="mi">8</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">6</span> <span class="mi">4</span> <span class="mi">3</span> <span class="o">|</span><span class="mi">5</span> <span class="mi">7</span> <span class="mi">1</span>
<span class="mi">5</span> <span class="mi">7</span> <span class="mi">3</span> <span class="o">|</span><span class="mi">2</span> <span class="mi">9</span> <span class="mi">1</span> <span class="o">|</span><span class="mi">6</span> <span class="mi">8</span> <span class="mi">4</span>
<span class="mi">1</span> <span class="mi">6</span> <span class="mi">4</span> <span class="o">|</span><span class="mi">8</span> <span class="mi">7</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">2</span> <span class="mi">9</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">hard1</span>  <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">. . . |. . 6 |. . .</span>
<span class="s1">. 5 9 |. . . |. . 8</span>
<span class="s1">2 . . |. . 8 |. . .</span>
<span class="s1">------+------+------</span>
<span class="s1">. 4 5 |. . . |. . .</span>
<span class="s1">. . 3 |. . . |. . .</span>
<span class="s1">. . 6 |. . 3 |. 5 4</span>
<span class="s1">------+------+------</span>
<span class="s1">. . . |3 2 5 |. . 6</span>
<span class="s1">. . . |. . . |. . .</span>
<span class="s1">. . . |. . . |. . .&#39;&#39;&#39;</span>
<span class="n">display</span><span class="p">(</span><span class="n">solve</span><span class="p">(</span><span class="n">hard1</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="mi">8</span> <span class="mi">4</span> <span class="o">|</span><span class="mi">5</span> <span class="mi">1</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">7</span>
<span class="mi">6</span> <span class="mi">5</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">4</span> <span class="mi">7</span> <span class="mi">2</span> <span class="o">|</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">8</span>
<span class="mi">2</span> <span class="mi">7</span> <span class="mi">1</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">3</span> <span class="mi">8</span> <span class="o">|</span><span class="mi">6</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">------+------+------</span>
<span class="mi">8</span> <span class="mi">4</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">2</span> <span class="mi">6</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">7</span> <span class="mi">1</span> <span class="mi">3</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="o">|</span><span class="mi">7</span> <span class="mi">5</span> <span class="mi">4</span> <span class="o">|</span><span class="mi">8</span> <span class="mi">6</span> <span class="mi">9</span>
<span class="mi">7</span> <span class="mi">9</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">1</span> <span class="mi">8</span> <span class="mi">3</span> <span class="o">|</span><span class="mi">2</span> <span class="mi">5</span> <span class="mi">4</span>
<span class="o">------+------+------</span>
<span class="mi">9</span> <span class="mi">1</span> <span class="mi">8</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">2</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">4</span> <span class="mi">7</span> <span class="mi">6</span>
<span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span> <span class="o">|</span><span class="mi">6</span> <span class="mi">9</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">5</span> <span class="mi">8</span> <span class="mi">1</span>
<span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">8</span> <span class="mi">4</span> <span class="mi">1</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">9</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">hard2</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">. . 5 |3 . . |. . .</span>
<span class="s1">8 . . |. . . |. 2 .</span>
<span class="s1">. 7 . |. 1 . |5 . .</span>
<span class="s1">------+------+------</span>
<span class="s1">4 . . |. . 5 |3 . .</span>
<span class="s1">. 1 . |. 7 . |. . 6</span>
<span class="s1">. . 3 |2 . . |. 8 .</span>
<span class="s1">------+------+------</span>
<span class="s1">. 6 . |5 . . |. . 9</span>
<span class="s1">. . 4 |. . . |. 3 .</span>
<span class="s1">. . . |. . 9 |7 . . &#39;&#39;&#39;</span>
<span class="n">display</span><span class="p">(</span><span class="n">solve</span><span class="p">(</span><span class="n">hard2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">4</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">2</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">6</span> <span class="mi">9</span> <span class="mi">8</span>
<span class="mi">8</span> <span class="mi">3</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">6</span> <span class="mi">5</span> <span class="mi">4</span> <span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">7</span>
<span class="mi">6</span> <span class="mi">7</span> <span class="mi">2</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">1</span> <span class="mi">8</span> <span class="o">|</span><span class="mi">5</span> <span class="mi">4</span> <span class="mi">3</span>
<span class="o">------+------+------</span>
<span class="mi">4</span> <span class="mi">9</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">1</span> <span class="mi">8</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">7</span> <span class="mi">2</span>
<span class="mi">2</span> <span class="mi">1</span> <span class="mi">8</span> <span class="o">|</span><span class="mi">4</span> <span class="mi">7</span> <span class="mi">3</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">7</span> <span class="mi">5</span> <span class="mi">3</span> <span class="o">|</span><span class="mi">2</span> <span class="mi">9</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">4</span> <span class="mi">8</span> <span class="mi">1</span>
<span class="o">------+------+------</span>
<span class="mi">3</span> <span class="mi">6</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">5</span> <span class="mi">4</span> <span class="mi">2</span> <span class="o">|</span><span class="mi">8</span> <span class="mi">1</span> <span class="mi">9</span>
<span class="mi">9</span> <span class="mi">8</span> <span class="mi">4</span> <span class="o">|</span><span class="mi">7</span> <span class="mi">6</span> <span class="mi">1</span> <span class="o">|</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span>
<span class="mi">5</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">|</span><span class="mi">8</span> <span class="mi">3</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">7</span> <span class="mi">6</span> <span class="mi">4</span>
</pre></div>
</div>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Capítulo anterior - 49. Resolución de Sudokus' data-toggle="tooltip">
    <a href="Sudoku 2.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="Sudoku 2.html" ></a>
  
  <li id="relations-next" class="navLink" title='Capítulo siguiente - 51. Sudoku' data-toggle="tooltip" >
    <a href="Sudoku.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="Sudoku.html" >Next Section - 51. Sudoku</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017 Francisco Moya.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>